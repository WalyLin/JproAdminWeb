import{X as t,k as p,a0 as f,S as x,r as d,o as y,c as w,d as n,J as R,e as _,fy as C,w as s,f as g,h as V,t as Y,i as M}from"./index-B8FPyN3o.js";import q from"./addCheckRecord-CrW_mHR_.js";import"./jproCheckRecord-Cn2PSlGi.js";const a={getList(e={}){return t({url:"jpro/mother/index",method:"get",params:e})},save(e={}){return t({url:"jpro/mother/save",method:"post",data:e})},update(e,o={}){return t({url:"jpro/mother/update/"+e,method:"put",data:o})},read(e){return t({url:"jpro/mother/read/"+e,method:"get"})},deletes(e){return t({url:"jpro/mother/delete",method:"delete",data:e})},changeStatus(e={}){return t({url:"jpro/mother/changeStatus",method:"put",data:e})},numberOperation(e={}){return t({url:"jpro/mother/numberOperation",method:"put",data:e})},importExcel(e={}){return t({url:"jpro/mother/import",method:"post",data:e})},downloadTemplate(){return t({url:"jpro/mother/downloadTemplate",method:"post",responseType:"blob"})},exportExcel(e={}){return t({url:"jpro/mother/export",method:"post",responseType:"blob",params:e})},getRecycleList(e={}){return t({url:"jpro/mother/recycle",method:"get",params:e})},recoverys(e){return t({url:"jpro/mother/recovery",method:"put",data:e})},realDeletes(e){return t({url:"jpro/mother/realDelete",method:"delete",data:e})}},S={class:"ma-content-block lg:flex justify-between p-4"},A={name:"jpro:mother"},O=Object.assign(A,{setup(e){const o=p(),l=p({}),m=p(null),I=f().format("YYYY-MM-DD"),T=u=>{l.value=u,m.value.open()},j=x({id:"jpro_mother",rowSelection:{showCheckedAll:!0},pk:"id",align:"center",operationColumn:!0,operationColumnWidth:190,operationColumnFixed:"false",showTools:!1,formOption:{viewType:"modal",width:1e3,layout:[{formType:"grid",cols:[{span:12,formList:[{dataIndex:"surname"}]},{span:12,formList:[{dataIndex:"name"}]}]},{formType:"grid",cols:[{span:8,formList:[{dataIndex:"age"}]},{span:8,formList:[{dataIndex:"height"}]},{span:8,formList:[{dataIndex:"weight"}]}]},{formType:"grid",cols:[{span:8,formList:[{dataIndex:"gravida"}]},{span:8,formList:[{dataIndex:"children_amount"}]},{span:8,formList:[{dataIndex:"body_status"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"bleed_amount"}]},{span:12,formList:[{dataIndex:"hep_b"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"last_menstrual_time"}]},{span:12,formList:[{dataIndex:"arrive_time"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"hospital_id"}]},{span:12,formList:[{dataIndex:"doctor_id"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"operation"}]},{span:12,formList:[{dataIndex:"food_allergy"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"drug_allergy"}]},{span:12,formList:[{dataIndex:"complication"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"menstrual_freq"}]},{span:12,formList:[{dataIndex:"tag"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"remark"}]},{span:12,formList:[{dataIndex:"passport"}]}]},{formType:"grid",cols:[{span:24,formList:[{dataIndex:"extra"}]}]}]},api:a.getList,recycleApi:a.getRecycleList,add:{show:!0,api:a.save,auth:["jpro:mother:save"]},edit:{show:!0,api:a.update,auth:["jpro:mother:update"]},delete:{show:!0,api:a.deletes,auth:["jpro:mother:delete"],realApi:a.realDeletes,realAuth:["jpro:mother:realDeletes"]},recovery:{show:!0,api:a.recoverys,auth:["jpro:mother:recovery"]},import:{show:!1,url:"jpro/mother/import",templateUrl:"jpro/mother/downloadTemplate",auth:["jpro:mother:import"]},export:{show:!0,url:"jpro/mother/export",auth:["jpro:mother:export"]}}),k=x([{title:"",dataIndex:"id",formType:"input",addDisplay:!1,editDisplay:!1,hide:!0,commonRules:{required:!0,message:"请输入"}},{title:"姓",dataIndex:"surname",formType:"input",search:!0,commonRules:{required:!0,message:"请输入姓"}},{title:"名",dataIndex:"name",formType:"input",search:!0,commonRules:{required:!0,message:"请输入名"}},{title:"年龄",dataIndex:"age",formType:"input-number",search:!0,sortable:{sortDirections:["ascend","descend"],sorter:!0},max:200},{title:"身体状态",dataIndex:"body_status",formType:"select",search:!0,dict:{name:"body_status",props:{label:"title",value:"key"},translation:!0}},{title:"医院",dataIndex:"hospital_id",formType:"select",dict:{url:"jpro/common/hospitals",props:{label:"name",value:"id"},translation:!0},search:!0},{title:"医生",dataIndex:"doctor_id",formType:"select",dict:{url:"jpro/common/doctors",props:{label:"name",value:"id"},translation:!0},search:!0},{title:"最近一次就诊",dataIndex:"last_check_record",formType:"input",addDisplay:!1,editDisplay:!1},{title:"乙肝疫苗",dataIndex:"hep_b",formType:"radio",dict:{name:"data_hep_b",props:{label:"title",value:"key"},translation:!0},align:"center",addDefaultValue:"1",hide:!0},{title:"怀孕次数",dataIndex:"gravida",formType:"input-number",search:!0,sortable:{sortDirections:["ascend","descend"],sorter:!0},max:30},{title:"护照",dataIndex:"passport",formType:"upload",type:"image",returnType:"url",hide:!1,addDefaultValue:""},{title:"手术情况",dataIndex:"operation",formType:"textarea",hide:!0,addDefaultValue:"无"},{title:"食物过敏",dataIndex:"food_allergy",hide:!0,formType:"textarea",addDefaultValue:"无"},{title:"药物过敏",dataIndex:"drug_allergy",hide:!0,formType:"textarea",addDefaultValue:"无"},{title:"并发症",dataIndex:"complication",hide:!0,formType:"textarea",addDefaultValue:"无"},{title:"身高",dataIndex:"height",formType:"input",hide:!0},{title:"体重",dataIndex:"weight",formType:"input",hide:!0},{title:"上次月经时间",dataIndex:"last_menstrual_time",formType:"date",format:"YYYY-MM-DD HH:mm",addDefaultValue:f().format("YYYY-MM-DD HH:00"),width:200,showTime:!0},{title:"到格鲁吉亚时间",dataIndex:"arrive_time",formType:"date",width:200,showTime:!1},{title:"流血量",dataIndex:"bleed_amount",formType:"radio",hide:!0,dict:{name:"bleed_amount",translation:!0},addDefaultValue:"1"},{title:"小孩数量",dataIndex:"children_amount",formType:"input-number",search:!0,max:20,hide:!0},{title:"月经频次(天)",dataIndex:"menstrual_freq",formType:"input-number",hide:!0,addDefaultValue:30},{title:"标签",dataIndex:"tag",formType:"input",hide:!0},{title:"备注",dataIndex:"remark",formType:"textarea",hide:!0},{title:"扩展信息",dataIndex:"extra",formType:"editor",hide:!0}]);return(u,c)=>{const b=d("icon-plus-circle"),v=d("a-link"),L=d("a-tag"),D=d("ma-crud");return y(),w("div",S,[n(D,{options:j,columns:k,ref_key:"crudRef",ref:o},R({last_check_record:s(({record:r})=>{var i;return[r.last_check_record?(y(),V(L,{key:0,color:((i=r.last_check_record)==null?void 0:i.check_time)==_(I)?"red":"green"},{default:s(()=>{var h;return[g(Y((h=r.last_check_record)==null?void 0:h.check_time),1)]}),_:2},1032,["color"])):M("",!0)]}),_:2},[_(C)("jpro:checkRecord:save")?{name:"operationBeforeExtend",fn:s(({record:r})=>[n(v,{onClick:i=>T(r)},{default:s(()=>[n(b),g("就诊")]),_:2},1032,["onClick"])]),key:"0"}:void 0]),1032,["options","columns"]),n(q,{mother:l.value,"onUpdate:mother":c[0]||(c[0]=r=>l.value=r),ref_key:"addCheckRecordRef",ref:m,parentCrudRef:o.value},null,8,["mother","parentCrudRef"])])}}});export{O as default};
