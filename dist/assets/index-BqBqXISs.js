import{_ as D}from"./imageSee-Gi9xyZVY.js";import{X as t,k as p,a0 as f,S as _,r as s,o as y,c as R,d as o,J as C,e as x,fy as Y,w as d,f as g,h as M,t as V,i as q}from"./index-7niCPtNG.js";import S from"./addCheckRecord-gQe60jkR.js";import"./image-Dp6hY-DG.js";const a={getList(e={}){return t({url:"jpro/mother/index",method:"get",params:e})},save(e={}){return t({url:"jpro/mother/save",method:"post",data:e})},update(e,n={}){return t({url:"jpro/mother/update/"+e,method:"put",data:n})},read(e){return t({url:"jpro/mother/read/"+e,method:"get"})},deletes(e){return t({url:"jpro/mother/delete",method:"delete",data:e})},changeStatus(e={}){return t({url:"jpro/mother/changeStatus",method:"put",data:e})},numberOperation(e={}){return t({url:"jpro/mother/numberOperation",method:"put",data:e})},importExcel(e={}){return t({url:"jpro/mother/import",method:"post",data:e})},downloadTemplate(){return t({url:"jpro/mother/downloadTemplate",method:"post",responseType:"blob"})},exportExcel(e={}){return t({url:"jpro/mother/export",method:"post",responseType:"blob",params:e})},getRecycleList(e={}){return t({url:"jpro/mother/recycle",method:"get",params:e})},recoverys(e){return t({url:"jpro/mother/recovery",method:"put",data:e})},realDeletes(e){return t({url:"jpro/mother/realDelete",method:"delete",data:e})}},A={class:"ma-content-block lg:flex justify-between p-4"},B={name:"jpro:mother"},$=Object.assign(B,{setup(e){const n=p(),i=p({}),m=p(null),I=f().format("YYYY-MM-DD"),T=u=>{i.value=u,m.value.open()},b=_({id:"jpro_mother",rowSelection:{showCheckedAll:!0},pk:"id",align:"center",operationColumn:!0,operationColumnWidth:190,operationColumnFixed:"false",showTools:!1,formOption:{viewType:"modal",width:1e3,layout:[{formType:"grid",cols:[{span:12,formList:[{dataIndex:"name"}]},{span:12,formList:[{dataIndex:"surname"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"height"}]},{span:12,formList:[{dataIndex:"weight"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"children_amount"}]},{span:12,formList:[{dataIndex:"body_status"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"age"}]},{span:12,formList:[{dataIndex:"gravida"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"hep_b"}]},{span:12,formList:[{dataIndex:"hep_b_date"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"bleed_amount"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"building_id"}]},{span:12,formList:[{dataIndex:"room_id"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"last_menstrual_time"}]},{span:12,formList:[{dataIndex:"arrive_time"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"hospital_id"}]},{span:12,formList:[{dataIndex:"doctor_id"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"operation"}]},{span:12,formList:[{dataIndex:"food_allergy"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"drug_allergy"}]},{span:12,formList:[{dataIndex:"complication"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"menstrual_freq"}]},{span:12,formList:[{dataIndex:"tag"}]}]},{formType:"grid",cols:[{span:12,formList:[{dataIndex:"remark"}]},{span:12,formList:[{dataIndex:"passport"}]}]},{formType:"grid",cols:[{span:24,formList:[{dataIndex:"extra"}]}]}]},api:a.getList,recycleApi:a.getRecycleList,add:{show:!0,api:a.save,auth:["jpro:mother:save"]},edit:{show:!0,api:a.update,auth:["jpro:mother:update"]},delete:{show:!0,api:a.deletes,auth:["jpro:mother:delete"],realApi:a.realDeletes,realAuth:["jpro:mother:realDeletes"]},recovery:{show:!0,api:a.recoverys,auth:["jpro:mother:recovery"]},import:{show:!1,url:"jpro/mother/import",templateUrl:"jpro/mother/downloadTemplate",auth:["jpro:mother:import"]},export:{show:!0,url:"jpro/mother/export",auth:["jpro:mother:export"]}}),j=_([{title:"",dataIndex:"id",formType:"input",addDisplay:!1,editDisplay:!1,hide:!0,commonRules:{required:!0,message:"请输入"}},{title:"姓",dataIndex:"surname",formType:"input",search:!0,commonRules:{required:!1,message:"请输入姓"}},{title:"名",dataIndex:"name",formType:"input",search:!0,commonRules:{required:!0,message:"请输入名"}},{title:"年龄",dataIndex:"age",formType:"input-number",search:!0,sortable:{sortDirections:["ascend","descend"],sorter:!0},max:200},{title:"身体状态",dataIndex:"body_status",formType:"select",search:!0,dict:{name:"body_status",props:{label:"title",value:"key"},translation:!0}},{title:"医院",dataIndex:"hospital_id",formType:"select",dict:{url:"jpro/common/hospitals",props:{label:"name",value:"id"},translation:!0},search:!0},{title:"医生",dataIndex:"doctor_id",formType:"select",dict:{url:"jpro/common/doctors",props:{label:"name",value:"id"},translation:!0},search:!0},{title:"最近一次就诊",dataIndex:"last_check_record",formType:"input",addDisplay:!1,editDisplay:!1},{title:"乙肝疫苗",dataIndex:"hep_b",formType:"radio",dict:{name:"data_hep_b",props:{label:"title",value:"key"},translation:!0},align:"center",addDefaultValue:"2",hide:!0},{title:"怀孕次数",dataIndex:"gravida",formType:"input-number",search:!0,sortable:{sortDirections:["ascend","descend"],sorter:!0},max:30},{title:"护照",dataIndex:"passport",formType:"upload",type:"image",returnType:"url"},{title:"楼栋",dataIndex:"building_id",formType:"select",hide:!0,dict:{url:"jpro/building/remote",method:"post",props:{label:"title",value:"id"},translation:!0},cascaderItem:["room_id"]},{title:"房间",dataIndex:"room_id",formType:"select",dict:{url:"jpro/room/remote?filter[building_id]={{key}}",method:"post",props:{label:"title",value:"id"},translation:!0},hide:!0},{title:"疫苗时间",dataIndex:"hep_b_date",formType:"input",hide:!0},{title:"手术情况",dataIndex:"operation",formType:"textarea",hide:!0},{title:"食物过敏",dataIndex:"food_allergy",hide:!0,formType:"textarea"},{title:"药物过敏",dataIndex:"drug_allergy",hide:!0,formType:"textarea"},{title:"并发症",dataIndex:"complication",hide:!0,formType:"textarea"},{title:"身高",dataIndex:"height",formType:"input",hide:!0},{title:"体重",dataIndex:"weight",formType:"input",hide:!0},{title:"上次月经时间",dataIndex:"last_menstrual_time",formType:"date",format:"YYYY-MM-DD HH:mm",addDefaultValue:f().format("YYYY-MM-DD HH:00"),width:200,showTime:!0},{title:"到格鲁吉亚时间",dataIndex:"arrive_time",formType:"date",width:200,showTime:!1},{title:"流血量",dataIndex:"bleed_amount",formType:"radio",hide:!0,dict:{name:"bleed_amount",translation:!0},addDefaultValue:"1"},{title:"小孩数量",dataIndex:"children_amount",formType:"input-number",search:!0,max:20,hide:!0},{title:"月经频次(天)",dataIndex:"menstrual_freq",formType:"input-number",hide:!0,addDefaultValue:30},{title:"标签",dataIndex:"tag",formType:"input",hide:!0},{title:"备注",dataIndex:"remark",formType:"textarea",hide:!0},{title:"扩展信息",dataIndex:"extra",formType:"editor",hide:!0}]);return(u,c)=>{const k=s("icon-plus-circle"),v=s("a-link"),L=s("a-tag"),w=s("ma-crud");return y(),R("div",A,[o(w,{options:b,columns:j,ref_key:"crudRef",ref:n},C({passport:d(({record:r})=>[o(D,{url:r.passport},null,8,["url"])]),last_check_record:d(({record:r})=>{var l;return[r.last_check_record?(y(),M(L,{key:0,color:((l=r.last_check_record)==null?void 0:l.check_time)==x(I)?"red":"green"},{default:d(()=>{var h;return[g(V((h=r.last_check_record)==null?void 0:h.check_time),1)]}),_:2},1032,["color"])):q("",!0)]}),_:2},[x(Y)("jpro:checkRecord:save")?{name:"operationBeforeExtend",fn:d(({record:r})=>[o(v,{onClick:l=>T(r)},{default:d(()=>[o(k),g("就诊")]),_:2},1032,["onClick"])]),key:"0"}:void 0]),1032,["options","columns"]),o(S,{mother:i.value,"onUpdate:mother":c[0]||(c[0]=r=>i.value=r),ref_key:"addCheckRecordRef",ref:m,parentCrudRef:n.value},null,8,["mother","parentCrudRef"])])}}});export{$ as default};
