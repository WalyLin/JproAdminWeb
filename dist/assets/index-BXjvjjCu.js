import{X as t,k as d,S as n,r as m,o as c,c as h,d as f}from"./index-DpTU2mMn.js";import{u as y}from"./user-BTLUpvG7.js";const r={getList(e={}){return t({url:"jpro/plan/index",method:"get",params:e})},save(e={}){return t({url:"jpro/plan/save",method:"post",data:e})},update(e,o={}){return t({url:"jpro/plan/update/"+e,method:"put",data:o})},read(e){return t({url:"jpro/plan/read/"+e,method:"get"})},deletes(e){return t({url:"jpro/plan/delete",method:"delete",data:e})},getRecycleList(e={}){return t({url:"jpro/plan/recycle",method:"get",params:e})},recoverys(e){return t({url:"jpro/plan/recovery",method:"put",data:e})},realDeletes(e){return t({url:"jpro/plan/realDelete",method:"delete",data:e})},changeStatus(e={}){return t({url:"jpro/plan/changeStatus",method:"put",data:e})},numberOperation(e={}){return t({url:"jpro/plan/numberOperation",method:"put",data:e})},importExcel(e={}){return t({url:"jpro/plan/import",method:"post",data:e})},downloadTemplate(){return t({url:"jpro/plan/downloadTemplate",method:"post",responseType:"blob"})},exportExcel(e={}){return t({url:"jpro/plan/export",method:"post",responseType:"blob",params:e})}},j={class:"ma-content-block lg:flex justify-between p-4"},x={name:"jpro:plan"},v=Object.assign(x,{setup(e){const o=d(),p=d([]);y.getList().then(l=>{l.data.map(a=>(a.nickname=a.nickname?a.nickname:a.username,a)),p.value=l.data});const u=n({id:"jpro_plan",rowSelection:{showCheckedAll:!0},pk:"id",operationColumn:!0,operationColumnWidth:160,formOption:{viewType:"modal",width:600},api:r.getList,recycleApi:r.getRecycleList,add:{show:!0,api:r.save,auth:["jpro:plan:save"]},edit:{show:!0,api:r.update,auth:["jpro:plan:update"]},delete:{show:!0,api:r.deletes,auth:["jpro:plan:delete"],realApi:r.realDeletes,realAuth:["jpro:plan:realDeletes"]},recovery:{show:!0,api:r.recoverys,auth:["jpro:plan:recovery"]},import:{show:!0,url:"jpro/plan/import",templateUrl:"jpro/plan/downloadTemplate",auth:["jpro:plan:import"]},export:{show:!0,url:"jpro/plan/export",auth:["jpro:plan:export"]},formOption:{width:800,layout:[]}}),s=n([{title:"",dataIndex:"id",formType:"input",addDisplay:!1,editDisplay:!1,hide:!0,commonRules:{required:!0,message:"请输入"}},{title:"用户id",dataIndex:"user_id",formType:"select",search:!0,dict:{data:p,props:{label:"nickname",value:"id"}},commonRules:[{required:!0,message:"用户必选"}]},{title:"事件详情",dataIndex:"detail",formType:"editor",hide:!0},{title:"备注",dataIndex:"remark",formType:"input",addDisplay:!1,editDisplay:!1,hide:!0,commonRules:{required:!0,message:"请输入备注"}},{title:"计划时间",dataIndex:"time",formType:"date",search:!0,showTime:!0},{title:"允许查看角色",dataIndex:"role",formType:"input",search:!0},{title:"状态",dataIndex:"status",formType:"radio",search:!0,commonRules:{required:!0,message:"请输入状态"},dict:{data:[{label:"未开始",value:"1"},{label:"进行中",value:"2"},{label:"执行完毕",value:"3"},{label:"取消",value:"4"}],translation:!0},addDefaultValue:1},{title:"",dataIndex:"created_at",formType:"date",addDisplay:!1,editDisplay:!1,showTime:!0},{title:"",dataIndex:"updated_at",formType:"date",addDisplay:!1,editDisplay:!1,hide:!0,showTime:!0},{title:"",dataIndex:"deleted_at",formType:"date",addDisplay:!1,editDisplay:!1,hide:!0,showTime:!0}]);return(l,a)=>{const i=m("ma-crud");return c(),h("div",j,[f(i,{options:u,columns:s,ref_key:"crudRef",ref:o},null,8,["options","columns"])])}}});export{v as default};
