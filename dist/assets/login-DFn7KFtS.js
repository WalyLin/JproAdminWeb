import{_ as D,X as E,b as F,a as A,k as h,S as H,n as L,c as X,l as a,t as d,d as e,w as s,F as Y,s as Z,r as t,o as y,e as G,h as J,Y as K,i as M,f as w,H as O,I as P}from"./index-BdmCqAiM.js";const v=c=>(O("data-v-abcf2e00"),c=c(),P(),c),Q=v(()=>a("div",{id:"background",class:"fixed"},null,-1)),W=v(()=>a("div",{class:"bg-backdrop-layout"},null,-1)),ee={class:"login-container"},oe={class:"login-width md:w-10/12 w-11/12 mx-auto flex justify-between h-full items-center"},se={class:"w-6/12 mx-auto left-panel rounded-l pl-5 pr-5 hidden md:block"},te={class:"logo"},ae=["src"],le={class:"slogan flex justify-end"},ne={class:"md:w-6/12 w-11/12 md:rounded-r mx-auto pl-5 pr-5 pb-10"},re={class:"mt-10 text-3xl pb-0 mb-10"},ie={class:"flex w-3/4 pt-2 mx-auto items-stretch justify-around"},de={__name:"login",setup(c){E({url:"system/getBingBackgroundImage",timeout:1e4,method:"get"}).then(o=>{document.getElementById("background").style.backgroundImage=`url(${o.data.url})`});const b=F(),m=A(),p=h(null),r=h(!1);let k=!1;var V={username:"",password:"",code:""};const l=H(V),$=L(),q=m.query.redirect?m.query.redirect:"/",S=async({values:o,errors:n})=>{if(!r.value){if(r.value=!0,p.value.checkResult(l.code)&&!n){if(!await $.login(l)){r.value=!1;return}Z().clearTags(),b.push(q)}r.value=!1}};return(o,n)=>{const f=t("icon-user"),g=t("a-input"),u=t("a-form-item"),B=t("icon-lock"),I=t("a-input-password"),N=t("icon-safe"),x=t("a-button"),C=t("a-divider"),z=t("icon-wechat"),_=t("a-avatar"),T=t("icon-alipay-circle"),U=t("icon-qq"),j=t("icon-weibo"),R=t("a-form");return y(),X(Y,null,[Q,W,a("div",ee,[a("div",oe,[a("div",se,[a("div",te,[a("img",{src:`${o.$url}logo.svg`,width:"45"},null,8,ae),a("span",null,d(o.$title),1)]),a("div",le,[a("span",null,"---- "+d(o.$t("sys.login.slogan")),1)])]),a("div",ne,[a("h2",re,d(o.$t("sys.login.title")),1),e(R,{model:l,onSubmit:S},{default:s(()=>[e(u,{field:"username","hide-label":!0,rules:[{required:!0,message:o.$t("sys.login.usernameNotice")}]},{default:s(()=>[e(g,{modelValue:l.username,"onUpdate:modelValue":n[0]||(n[0]=i=>l.username=i),class:"w-full",size:"large",placeholder:o.$t("sys.login.username"),"allow-clear":""},{prefix:s(()=>[e(f)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),e(u,{field:"password","hide-label":!0,rules:[{required:!0,message:o.$t("sys.login.passwordNotice")}]},{default:s(()=>[e(I,{modelValue:l.password,"onUpdate:modelValue":n[1]||(n[1]=i=>l.password=i),placeholder:o.$t("sys.login.password"),size:"large","allow-clear":""},{prefix:s(()=>[e(B)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),G(k)?M("",!0):(y(),J(u,{key:0,field:"code","hide-label":!0,rules:[{required:!0,match:/^[a-zA-Z0-9]{4}$/,message:o.$t("sys.login.verifyCodeNotice")}]},{default:s(()=>[e(g,{modelValue:l.code,"onUpdate:modelValue":n[2]||(n[2]=i=>l.code=i),placeholder:o.$t("sys.login.verifyCode"),size:"large","allow-clear":""},{prefix:s(()=>[e(N)]),append:s(()=>[e(K,{ref_key:"Verify",ref:p},null,512)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"])),e(u,{"hide-label":!0,class:"mt-5"},{default:s(()=>[e(x,{"html-type":"submit",type:"primary",long:"",size:"large",loading:r.value},{default:s(()=>[w(d(o.$t("sys.login.loginBtn")),1)]),_:1},8,["loading"])]),_:1}),e(C,{orientation:"center"},{default:s(()=>[w(d(o.$t("sys.login.otherLoginType")),1)]),_:1}),a("div",ie,[e(_,{class:"other-login wechat"},{default:s(()=>[e(z)]),_:1}),e(_,{class:"other-login alipay"},{default:s(()=>[e(T)]),_:1}),e(_,{class:"other-login qq"},{default:s(()=>[e(U)]),_:1}),e(_,{class:"other-login weibo"},{default:s(()=>[e(j)]),_:1})])]),_:1},8,["model"])])])])],64)}}},ue=D(de,[["__scopeId","data-v-abcf2e00"]]);export{ue as default};
