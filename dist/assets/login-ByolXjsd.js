import{_ as z,b as B,a as I,k as g,S as U,n as R,c as T,l as r,t as h,d as e,w as o,F as D,s as F,r as t,o as y,e as j,h as A,Y as E,i as H,f as Y,H as Z,I as G}from"./index-q4eErpSh.js";const c=u=>(Z("data-v-f84b1c13"),u=u(),G(),u),J=c(()=>r("div",{id:"background",class:"fixed"},null,-1)),K=c(()=>r("div",{class:"bg-backdrop-layout"},null,-1)),L={class:"login-container"},M={class:"login-width md:w-10/12 w-11/12 mx-auto flex justify-between h-full items-center"},O={class:"md:w-6/12 w-11/12 md:rounded-r mx-auto pl-5 pr-5 pb-10"},P=c(()=>r("div",{class:"cuslogo"},null,-1)),Q={class:"mt-10 text-3xl pb-0 mb-10"},W={__name:"login",setup(u){const v=B(),p=I(),m=g(null),n=g(!1);let w=!1;var b={username:"",password:"",code:""};const s=U(b),V=R(),k=p.query.redirect?p.query.redirect:"/",S=async({values:a,errors:l})=>{if(!n.value){if(n.value=!0,m.value.checkResult(s.code)&&!l){if(!await V.login(s)){n.value=!1;return}F().clearTags(),v.push(k)}n.value=!1}};return(a,l)=>{const _=t("icon-user"),f=t("a-input"),i=t("a-form-item"),$=t("icon-lock"),N=t("a-input-password"),x=t("icon-safe"),C=t("a-button"),q=t("a-form");return y(),T(D,null,[J,K,r("div",L,[r("div",M,[r("div",O,[P,r("h2",Q,h(a.$t("sys.login.title")),1),e(q,{model:s,onSubmit:S},{default:o(()=>[e(i,{field:"username","hide-label":!0,rules:[{required:!0,message:a.$t("sys.login.usernameNotice")}]},{default:o(()=>[e(f,{modelValue:s.username,"onUpdate:modelValue":l[0]||(l[0]=d=>s.username=d),class:"w-full",size:"large",placeholder:a.$t("sys.login.username"),"allow-clear":""},{prefix:o(()=>[e(_)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),e(i,{field:"password","hide-label":!0,rules:[{required:!0,message:a.$t("sys.login.passwordNotice")}]},{default:o(()=>[e(N,{modelValue:s.password,"onUpdate:modelValue":l[1]||(l[1]=d=>s.password=d),placeholder:a.$t("sys.login.password"),size:"large","allow-clear":""},{prefix:o(()=>[e($)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),j(w)?H("",!0):(y(),A(i,{key:0,field:"code","hide-label":!0,rules:[{required:!0,match:/^[a-zA-Z0-9]{4}$/,message:a.$t("sys.login.verifyCodeNotice")}]},{default:o(()=>[e(f,{modelValue:s.code,"onUpdate:modelValue":l[2]||(l[2]=d=>s.code=d),placeholder:a.$t("sys.login.verifyCode"),size:"large","allow-clear":""},{prefix:o(()=>[e(x)]),append:o(()=>[e(E,{ref_key:"Verify",ref:m},null,512)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"])),e(i,{"hide-label":!0,class:"mt-5"},{default:o(()=>[e(C,{"html-type":"submit",type:"primary",long:"",size:"large",loading:n.value},{default:o(()=>[Y(h(a.$t("sys.login.loginBtn")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])])],64)}}},ee=z(W,[["__scopeId","data-v-f84b1c13"]]);export{ee as default};
